<div class="object" id="trapdoor" onclick="revealInteraction('trapdoor')"></div>
<div class="interaction" id="trapdoor_interaction">
    <img src="objects/trapdoor/trapdoor.png" alt="Trapdoor" class="interaction-image">
    <div class="options" id="trapdoor_options">
        <button onclick="opentrapdoor()">Ouvrir</button>
        <button onclick="closeInteraction('trapdoor_interaction');">Fermer</button>
    </div>
    <div class="text"> 
        <p class="typewriter">Une trappe, elle à l'air de ne pas avoir de serrure.</p>
    </div>
</div>

<style>
    #trapdoor {
        background: url(objects/trapdoor/trapdoor.png) center/contain no-repeat;

        /* Create a mask using the PNG's alpha */
        -webkit-mask: url(objects/trapdoor/trapdoor.png) center/contain no-repeat;
        mask: url(objects/trapdoor/trapdoor.png) center/contain no-repeat;
        
        width: 18%;
        height: 11%;
        top: 12%;
        left: 51%;
    }
</style>

<script>
    function opentrapdoor(){
        if (GameSave.hasItem('stool')){
            if (GameSave.hasItem('shrooms')){
                const interactionBox = document.getElementById('trapdoor_interaction');
                interactionBox.querySelector('.text p').innerText = "Vous utilisez le tabouret pour atteindre la trappe, elle s'ouvre.";
                callTypeWriter("trapdoor");

                let options = document.getElementById('trapdoor_options');
                options.innerHTML = `<button onclick="Leave()">Sortir</button>`;
                return;
            }
            const interactionBox = document.getElementById('trapdoor_interaction');
            interactionBox.querySelector('.text p').innerText = "Je devrais peut être récupérer tout ce que je trouve avant d'avancer...";
            callTypeWriter("trapdoor");
            return;
        }
        else{
            const interactionBox = document.getElementById('trapdoor_interaction');
            interactionBox.querySelector('.text p').innerText = "La trappe est trop haute pour l'atteindre.";
            callTypeWriter("trapdoor");
            return;
        }
    }
    function Leave(){
        GameSave.removeItem('stool');
        window.location.href = "../../../pages/scene1/mainScene1.html";
    }
</script>