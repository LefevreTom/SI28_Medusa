<div class="object" id="radio" onclick="revealInteraction('radio')"></div>
<div class="interaction" id="radio_interaction">
    <img src="objects/radio/radio.png" alt="radio" class="interaction-image">
    <div class="options" id="radio_options">
        <button id="batteryRadio" onclick="openradio()">Allumer</button>
        <button id="onRadio" onclick="turnOn()">Allumer</button>
        <button id="offRadio" onclick="turnOff()">Éteindre</button>
        <button onclick="closeInteraction('radio_interaction');">Fermer</button>
    </div>
    <div class="text"> 
        <p class="typewriter">Un vieux poste de radio.</p>
    </div>
</div>

<style>
    #radio {
        background: url(objects/radio/radio.png) center/contain no-repeat;

        /* Create a mask using the PNG's alpha */
        -webkit-mask: url(objects/radio/radio.png) center/contain no-repeat;
        mask: url(objects/radio/radio.png) center/contain no-repeat;
        
        width: 19vh;
        height: 31vh;
        top: 33.4vh;
        left: 79.7vh;
    }
    #onRadio, #offRadio {
         display: none;
        display: none;
    }
</style>

<script>
    var hasBattery = false;
    var radioOn = false;

    function openradio(){
        if (GameSave.hasItem('battery')){
            const interactionBox = document.getElementById('radio_interaction');
            interactionBox.querySelector('.text p').innerText = "Vous insérez la batterie dans le poste de radio.";
            hasBattery = true;
            GameSave.removeItem('battery');
            document.getElementById('batteryRadio').style.display = 'none'; 
            document.getElementById('onRadio').style.display = 'block';
            callTypeWriter("radio");
            return;
        }
        else{
            const interactionBox = document.getElementById('radio_interaction');
            interactionBox.querySelector('.text p').innerText = "Vous essayez de l'allumer, mais il lui manque une source d'énergie.";
            callTypeWriter("radio");
            return;
        }
    }
    function turnOn(){
        if (hasBattery && !radioOn){
            const interactionBox = document.getElementById('radio_interaction');
            interactionBox.querySelector('.text p').innerText = "Vous allumez le poste de radio.";
            radioOn = true;
            
            const onRadioOption = document.querySelector('#radio_options #onRadio');
            onRadioOption.style.display = 'none';
            const offRadioOption = document.querySelector('#radio_options #offRadio');
            offRadioOption.style.display = 'block';

            callTypeWriter("radio");
            return;
        }
    }
    function turnOff(){
        if (hasBattery && radioOn){
            const interactionBox = document.getElementById('radio_interaction');
            interactionBox.querySelector('.text p').innerText = "Vous éteignez le poste de radio.";
            radioOn = false;
            
            const onRadioOption = document.querySelector('#radio_options #onRadio');
            onRadioOption.style.display = 'block';
            const offRadioOption = document.querySelector('#radio_options #offRadio');
            offRadioOption.style.display = 'none';

            callTypeWriter("radio");
            return;
        }
    }
</script>