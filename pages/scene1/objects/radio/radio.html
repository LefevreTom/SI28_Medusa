<div class="object" id="radio" onclick="revealInteraction('radio')"></div>
<div class="interaction" id="radio_interaction">
    <img src="objects/radio/radio.png" alt="radio" class="interaction-image">
    <div class="options" id="radio_options">
        <button id="batteryRadio" onclick="openradio()">Allumer</button>
        <button id="onRadio" onclick="turnOn()">Allumer</button>
        <button id="offRadio" onclick="turnOff()">Éteindre</button>
        <button onclick="closeInteraction('radio_interaction');">Fermer</button>
    </div>
    <div class="text"> 
        <p class="typewriter">Une vieille radio, elle a clairement survécu à la guerre de l’eau</p>
    </div>
</div>

<style>
    #radio {
        background: url(objects/radio/radio.png) center/contain no-repeat;

        /* Create a mask using the PNG's alpha */
        -webkit-mask: url(objects/radio/radio.png) center/contain no-repeat;
        mask: url(objects/radio/radio.png) center/contain no-repeat;
        
        width: 7%;
        height: 12%;
        top: 74%;
        left: 67%;
    }
    #onRadio, #offRadio {
         display: none;
        display: none;
    }
</style>

<script>
    var hasBattery = false;
    var radioOn = false;

    function openradio(){
        if (GameSave.hasItem('battery')){
            const interactionBox = document.getElementById('radio_interaction');
            interactionBox.querySelector('.text p').innerText = "La batterie est insérée dans le poste";
            hasBattery = true;
            GameSave.removeItem('battery');
            document.getElementById('batteryRadio').style.display = 'none'; 
            document.getElementById('onRadio').style.display = 'block';
            callTypeWriter("radio");
            AudioManager.playSfx('../../assets/audio/sfx/BrancheLaRadio.mp3');
            return;
        }
        else{
            const interactionBox = document.getElementById('radio_interaction');
            interactionBox.querySelector('.text p').innerText = "Génial, elle n'a plus de batterie";
            callTypeWriter("radio");
            return;
        }
    }
    function turnOn(){
        if (hasBattery && !radioOn){
            const interactionBox = document.getElementById('radio_interaction');
            interactionBox.querySelector('.text p').innerText = "Des grésillements… puis une musique se lance";
            AudioManager.playSfx('../../assets/audio/music/3 pistes-Radio/InfoXylophe.mp3');
            radioOn = true;
            const onRadioOption = document.querySelector('#radio_options #onRadio');
            onRadioOption.style.display = 'none';
            AudioManager.playSfx('../../assets/audio/sfx/ChangementDeChaineRadio.mp3');
            const offRadioOption = document.querySelector('#radio_options #offRadio');
            offRadioOption.style.display = 'block';
            AudioManager.playSfx('../../assets/audio/sfx/ChangementDeChaineRadio.mp3');
            callTypeWriter("radio");
            return;
        }
    }
    function turnOff(){
        if (hasBattery && radioOn){
            const interactionBox = document.getElementById('radio_interaction');
            interactionBox.querySelector('.text p').innerText = "Le poste radio s’éteint dans un claquement sec";
            radioOn = false;
            AudioManager.playSfx('../../assets/audio/sfx/ChangementDeChaineRadio.mp3');

            const onRadioOption = document.querySelector('#radio_options #onRadio');
            onRadioOption.style.display = 'block';
            const offRadioOption = document.querySelector('#radio_options #offRadio');
            offRadioOption.style.display = 'none';

            callTypeWriter("radio");
            return;
        }
    }
</script>